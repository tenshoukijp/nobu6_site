%(hilight)s
<div class="content-box mb-3 content-lighten">
    <h2><i class="fa fa-book fa-fw"></i>ScenarioMod の理解すべきもの・しなくて良いもの</h2>
</div>
<div class="content-box mb-3 content-lighten">
    <h3>概要</h3>
    <p>ScenarioModは多くのたくさんのソースファイルが付いていますが、<br>
        理解すべき対象は非常に絞られています。<br>
        しかも幸いなことに、理解対象はすべて「日本語による関数や変数」なのです。</p>
</div>
<div class="content-box mb-3 content-lighten">
    <h3>ScenarioModの理解・編集の区分け</h3>
    <p>普段からプログラムに書き慣れていない人は、<br>
        ScenarioModのソースを見ると、圧倒されてしまうと思います。<br>
    </p>
    <p>ScenarioModではこれらを可能な限り緩和するべく、理解対象の処は、可能な限り「日本語」を多く使ってプログラムを記載しています。</p>
    <p>また、ソースを以下のような趣旨にハッキリと区分しています。</p>
    <ul class="pointlist">
        <li>
            <h4>参照しない。変更しない。</h4>
            <p>見る必要も編集する必要もないもの。<br>
                (<b>※これらはバージョンがアップされたら更新されるため、編集は非推奨</b>)</p>
        <li>
            <h4>参照する。変更しない。</h4>
            <p>ソースを記述する際には、その都度参照する必要はあるが編集する必要はないもの。<br>
                (<b>※これらはバージョンがアップされたら更新されるため、編集は非推奨</b>)
        <li>
            <h4>自分で変更する。自分でバックアップを取っておく。</h4>
            <p>自分で編集すべきもの。</p>
    </ul>
    <p>に分かれています。</p>
    <p>早速、ソリューションエキスプローラで確認してみましょう。<br>
    </p>
    <p>まず、ソリューションエキスプローラーのツリー状の｢+｣｢-｣部分をあちこちクリックして、<br>
        以下のような｢表示状態｣にしてみましょう。<br>
    </p>
    <p><img src="./cnt_mod/mod_snmod/cnt_mod_scenario_mod_08.png"><br>
    </p>
    <p>上図の</p>
    <ul class="pointlist">

        <li>
            <h4>赤い部分</h4>
            <p>赤い部分が『<b>見る必要はあるが編集する必要はないもの</b>』です。
        <li>
            <h4>青い部分</h4>
            <p>｢青い部分」だけが『<b>③自分で編集すべきもの</b>』となります。
    </ul>
    <p>そうです。<br>
    </p>
    <p>実は｢自分で編集すべきもの｣はたったの２つしかないのです。<br>
    </p>
    <p>しかもこの２つは｢２つで１組の」セットですから、<br>
        言い換えれば、編集対象は｢青い枠内｣の１セットだけと言えます。<br>
    </p>
</div>
<div class="content-box mb-3 content-lighten">
    <h3>編集対象「カスタム駆動関数.cpp」</h3>
    <p>各々を理解するまえに、軽く｢『<b>自分で編集すべきもの</b>』を見てみることにしましょう。<br>
    </p>

    <ul class="pointlist">
        <li>
            <h4>On_噴出メッセージ直前</h4>
            <p>｢<b>カスタム駆動関数.cpp</b>｣の中身を見ると、以下のようになっています。<br>
                他にもいろいろと記載されていますが、まずは以下のような記述の部分を焦点としましょう。 <br>
            </p>

            <div class="code">
                <pre class="brush:cpp;highlight:[3,4,5]"">
string カスタム::On_噴出メッセージ直前(string 武将名, string 元メッセージ, メッセージ関連情報型 メッセージ関連情報) {

    if (武将名 == &quot;真田幸隆&quot;) {
        return &quot;マジかよ…最悪だぉ!!&quot;;
    }

    // 変更しない場合&quot;&quot;
    return &quot;&quot;;
}
</pre></div>


        <p>細かなところの意味は不明でしょうが、どうやら<br>
        </p>
        <p>｢噴出しメッセージの直前｣に｢武将が『真田幸隆』｣ならば、｢マジかよ…最悪だぉ!!｣にしているということ。<br>
        詳細は不明としても、とにかく<br>
        『真田幸隆』ならば｢マジかよ…最悪だぉ!!｣なんだということがわかります。<br>
        </p>
        <li>
        <h4>On_プレイヤ担当ターン《メイン画面》</h4>
        <p>少し他のところに自分で入力してみるとしましょう。<br>
        今回は「On_プレイヤ担当ターン《メイン画面》」の関数に５行ほど足しこんで以下のように記述してみましょう。</p>
        <p>この段階ではハッキリと意味を理解する必要はありません。</p>
        <div class=" code"><pre class="brush:cpp;highlight:[2,3,4,6,7]"">
void カスタム::On_プレイヤ担当ターン《メイン画面》() {
  フェイドアウト();
  カメラ移動(3);
  フェイドイン();

  効果音再生(効果音音源::豊作);
  確認ダイアログ表示(&quot;これはプロトタイプだよ!!&quot;);
}
</pre>
            </div>

            <p>｢プレイヤのターンがメイン画面でまわってきた時｣、「フェイドアウト～カメラ移動（３とは何だ？）～フェイドイン」⇒「効果音の『豊作』が鳴って」⇒「『これはプロトタイプだよ!!』というダイアログが出る」<br>
                日本語なので、なんとなくわかります。<br>
            </p>
            <p>｢カメラ移動｣の｢３」というのは何でしょうか。<br>
                <b>｢カメラ移動｣にマウスを当ててみましょう。</b><br>
            </p>
            <p><img src="./cnt_mod/mod_snmod/cnt_mod_scenario_mod_10.png"><br>
            </p>
            <p>すると、バルーンヘルプ表示が出るはずです。 <br>
                どうやら、｢３」というのは城番号か何かのようです。「３番＝どこの城」なのか？ は今の段階ではさておき、「３番の城にカメラ移動」するのでしょう。<br>
            </p>
    </ul>
</div>
<div class="content-box mb-3 content-lighten">
    <h3>動作確認</h3>
    <p>さて、(ScenarioMod.dllをちゃんと天翔記フォルダーにコピーしたかを確認した後)、実際に天翔記を起動して、 実際にそうなのか確認してみましょう。<br>
        確かにプレイヤーのターンで、フェイドアウト・インを挟んで｢どこぞ」にカメラが移動した後、勝ち鬨と共に、ダイアログが表示されました。<br>
    </p>
    <p><img src="./cnt_mod/mod_snmod/cnt_mod_scenario_mod_11.png"><br>
    </p>
    <p>又、真田幸隆を見てみたところ、｢会見｣のメッセージや｢商人｣とのやりとりなどで｢マジかよ…最悪だぉ!!｣ばかり言っています。<br>
        どうやら確かに機能しているようです。 <br>
    </p>

    <p><img src="./cnt_mod/mod_snmod/cnt_mod_scenario_mod_12.png"><br>
    </p>
    <p><img src="./cnt_mod/mod_snmod/cnt_mod_scenario_mod_13.png"><br>
    </p>
    </ul>
</div>
<div class="content-box mb-3 content-lighten">
    <h3>その他</h3>
    <p>以上となります。<br>
        それでは次節より、｢知るべきこと」について常に｢練習｣を挟みながら、細かく見てゆきましょう。</p>
</div>