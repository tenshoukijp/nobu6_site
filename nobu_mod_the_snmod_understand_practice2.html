%(hilight)s
<div class="content-box mb-3 content-lighten">
  <h2><i class="fa fa-book fa-fw"></i>練習２</h2>
</div>
<div class="content-box mb-3 content-lighten">
  <h3>概要</h3>
  <p>この節では、とにかくScenarioModのソースを実際にいじくってみて、感覚をつかみます。</p>
</div>
<div class="content-box mb-3 content-lighten">
  <h3>カメラの移動先を変更してみる</h3>
  <p>さて、もう一度前節のソース、今度は後半を弄ってみましょう。<br></p>
  <div class="code">
    <pre class="brush:cpp">
void カスタム::On_プレイヤ担当ターン《メイン画面》() {
  フェイドアウト();
  カメラ移動(3);
  フェイドイン();

  効果音再生(効果音音源::豊作);
  確認ダイアログ表示(&quot;これはプロトタイプだよ!!&quot;);
}
</pre>
  </div>
  <p>まず、フェイドアウト(画面を暗くする)、フェイドイン(暗い状態から元へと戻す)は、良いとして<br>
    「カメラ移動(3)」の｢３」を変更してみましょう。<br>
  </p>
  <p>｢カメラ移動｣の｢３」というのは何だったでしょうか。｢カメラ移動｣にマウスを当ててみましょう。<br>
  </p>
  <p><img src="./cnt_mod/mod_snmod/cnt_mod_scenario_mod_10.png"><br>
  </p>
  <p>すると、バルーンヘルプ表示が出るはずです。 <br>
  </p>
  <blockquote>｢城番号【配列用】｣<br>
  </blockquote>
  <p>とあります。<br>
  </p>
  <p>この【配列用】というのは、このScenarioModに出てくるとても重要な概念となっています。</p>
  <p><b>｢城番号｣は1番から始まっていますが、｢城番号【配列用】｣には｢0｣番から始まったと想定した番号を入れる必要がありますよ、という意味となっています。<br>
    </b></p>
  <p>別の言い方をしましょう。<br>
  </p>
  <p><b>｢城番号【配列用】｣とある場合、｢城番号｣から１を引いた値を渡せば良い、ということとなります。</b></p>
  <blockquote>城番号【配列用】 == 城番号 - 1</blockquote>
  <p>では、城番号はどこで求めればよいのでしょうか？<br>
    それは<a href="?page=nobu_mod_the_emn_projects_scenario">シナリオエディタ</a>の以下の項目で視覚的に見ることが出来ます。<br>
    <br>
    また、<a href="?page=nobu_mod_the_memod">メモリエディタ</a>の「p城情報」のタブでも確認することが出来ます。
  </p>
  <p>｢室町｣でいうところの｢128｣。<br>
    これが城番号です。<br>
  </p>
  <p>厳密にはイベント等が発生することで、｢城名｣が変わっても｢城番号｣は変わりませんので<br>
    <b> ｢城の位置の番号｣</b>といった方が妥当かもしれません。<br>
  </p>
  <p><img src="./cnt_mod/mod_snmod/cnt_mod_scenario_mod_17.png"><br>
  </p>
  <p>例えば、｢室町｣にカメラを移動させるためには、｢128 - 1｣の｢127｣を「城番号【配列用】」に渡すこととなります。<br>
  </p>
  <pre class="brush:cpp;highlight:[2]">
    フェイドアウト();
    カメラ移動(127);
    フェイドイン();
    </pre>
  <p>しかし、これではわかりにくいため、ScenarioModでは、すでに「全ての城」が定義済みです。</p>
  <pre class="brush:cpp;highlight:[2]">
    フェイドアウト();
    カメラ移動(列挙::城::城配列番号::室町御所);
    フェイドイン();
    </pre>
  <p>さらに短く</p>
  <pre class="brush:cpp;highlight:[2]">
    フェイドアウト();
    カメラ移動(城配列番号::室町御所);
    フェイドイン();
    </pre>
  <p>と記述することも出来ます。</p>
</div>
<div class="content-box mb-3 content-lighten">
  <h3>効果音の内容を変更してみる</h3>
  <p>さて、次に｢効果音｣を変えてみましょう。<br>
  </p>
  <p>下図のように、バックスペースキーを何度か押して、｢勝ち鬨｣を削除し、<br>
    ｢::｣の次の位置にカーソルがあることを確認した状態で｢CTRL｣+｢SPACE｣キーを押してみましょう。<br>
    (CTRL+SPACEの組み合わせが、押しにくいキー配置になっているようなキーボードを利用している場合は、｢::｣のうち、後ろの｢:｣まで１つ消して、｢:｣を打ち直すと 同じ画面となります。) <br>
  </p>
  <p><img src="./cnt_mod/mod_snmod/cnt_mod_scenario_mod_19.png"><br>
  </p>

  <p>鳴らしてみたい、好きな音源を選んでみましょう。<br>
  </p>
</div>
<div class="content-box mb-3 content-lighten">
  <h3>動作確認</h3>
  <p>さて、再びいつものように、ビルドして、エラーが無いことを確認したら、<br>
    天翔記フォルダへと反映させ、天翔記を起動して変化を確認してみましょう。 <br>
  </p>
  <p>変化したことを確認出来れば、この練習項目は終了です。<br>
    お疲れ様でした。 <br>
  </p>
  <p><img src="./cnt_mod/mod_snmod/cnt_mod_scenario_mod_18.png"><br>
  </p>
</div>