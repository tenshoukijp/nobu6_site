%(hilight)s
<div class="content-box mb-3 content-lighten">
<h2><i class="fa fa-lua fa-fw"></i>uLua (REPL/インタプリタ/コンパイラ/リンカ 兼用) (utf8用)</h2>
</div>
<div class="content-box mb-3 content-lighten">
        <h3>概要</h3>
        <p>
            uLuaは当サイトの管理人がLua v5.3.4をカスタムしたものです。
            <br>
            <br>
            特徴としては、
            <br>
            <ul>
                <li>
                    たった１つの実行ファイルで、<br>
                    <br>
                    <ol>
                        <li>対話型コンソール (REPL)</li>
                        <li>インタプリタ (スクリプトや中間バイトコードを実行する)</li>
                        <li>コンパイラー (１つ、あるいは、複数のスクリプトを、１つの中間バイトコードに変換する)</li>
                        <li>リンカ (スクリプトもしくは中間バイトコードをexeにする)</li>
                    </ol>
                    を兼ね備えること。<br>
                    <br>
                <li><b>同様の用途で、文字列やファイルIO等の扱いをcp932(sjis)用に配慮したものは、<a href="?page=nobu_tool_hm_luajit_cmdtool">hmLJ</a>となります。</b>
            </ul>
</div>
<div class="content-box mb-3 content-lighten">
        <h3>ダウンロード</h3>

	  <div class="card mb-3 ml-3" style="max-width: 30rem;">
	    <div class="card-body text-center">
              <div class="row">
              <div class="col-12"><small>更新日 %(year)04d/%(mon)02d/%(mday)02d</small></div>
              </div>
	      <a href="%(file)s" class="btn btn-primary"><i class="fa fa-download fa-fw"></i>uLua.zip ver v5.340</a>
	    </div>
	  </div>
</div>
<div class="content-box mb-3 content-lighten">
        <h3>コマンドライン系のカスタム項目</h3>
        <ul class="pointlist">
            <li>
                <h4><b>対話型コンソール</b>としての実行</h4>
                (但し、このツールはcp932(sjis)用に特化されておらず、あくまでの本来のLuaそのままですので、<br>
                コンソールへの日本語の表示には難があります。そういった用途には、<a href="?page=nobu_tool_hm_luajit_cmdtool">hmLJ</a> を利用してください。)<br>
                <div class="code">
                    <pre class="brush:ps" style="font-weight: bold">
    uLua.exe
    </pre>
                </div>
            <li>
                <h4><b>スクリプト</b>としての実行</h4>
                (luaと同じ引数が使えます)<br>
                <div class="code">
                    <pre class="brush:ps" style="font-weight: bold">
    uLua.exe ****.lua (他の引数)
    </pre>
                </div>
            <li>
                <h4><b>コンパイラ</b>としての実行</h4>
                全ての引数の一番後ろに「-compile」と付けてください。<br>
                (luacと同じ引数が使えます)<br>
                <div class="code">
                    <pre class="brush:ps" style="font-weight: bold">
    uLua.exe -o ****.out *****.lua -compile
    </pre>
                </div>
                出力ファイル名を指定しない場合、luac.out という名前でファイルが出力されます。<br>
                <div class="code">
                    <pre class="brush:ps" style="font-weight: bold">
    uLua.exe *****.lua -compile
    </pre>
                </div>
                コメント等を除去した状態で中間コードを生成する場合は、-sを付けます。<br>
                <div class="code">
                    <pre class="brush:ps" style="font-weight: bold">
    uLua.exe -s -o ****.out *****.lua -compile
    </pre>
                </div>
            <li>
                <h4><b>bin2c</b>としての実行</h4>
                中間コードを、C言語ソースへと貼り付け可能なソースコードとして出力します。<br>
                <div class="code">
                    <pre class="brush:ps" style="font-weight: bold">
    uLua.exe *****.out -bin2c
    </pre>
                </div>
            <li>
                <h4><b>リンカ</b>としての実行</h4>
                全ての引数の一番後ろに「-link」と付けてください。<br>
                <div class="code">
                    <pre class="brush:ps" style="font-weight: bold">
    uLua.exe ****.lua ****.exe -link
    </pre>
                </div>
                もしくは、中間バイトコードをリンク
                <div class="code">
                    <pre class="brush:ps" style="font-weight: bold">
    uLua.exe ****.out ****.exe -link
    </pre>
                </div>
            <li>
                <h4>例</h4>
                文字エンコード「utf8」のファイルで、
                <div class="code">
                    <pre class="brush:lua">
    for i, v in pairs({"表示", "ソート"}) do
        print(i, v)
    end
    </pre>
                </div>
                というファイルをtest.luaというファイル名で用意。uLuaと同じディレクトリに保存します。<br>
                <br>
                コマンドプロンプトでuLuaのディレクトリまで移動した後、<br>
                <div class="code">
                    <pre class="brush:ps" style="font-weight: bold">
    uLua.exe test.lua test.exe -link
    </pre>
                </div>
                とすると、test.exeが出来上がります。<br>
                <br>
                このファイルは単体で実行可能であり、<br>
                他のファイル等への依存はありません。<br>
                <br>
        </ul>

</div>
<div class="content-box mb-3 content-lighten">
        <h3>ライセンス</h3>
        <ul>
            <li>Lua 本体の <a href="http://www.lua.org/license.html"><b>MITライセンス</b></a>です。<br>
        </ul>
</div>
<div class="content-box mb-3 content-lighten">
        <h3>ソース</h3>
        <p><a href="https://github.com/komiyamma/hm_ulua">Github</a>にあがっています。</p>
</div>
<div class="content-box mb-3 content-lighten">
        <h3>補足</h3>
        <p>
            「LUA_COMPAT_5_2」のプリプロセッサマクロを有効にしてコンパイルされています。<br>
            又、Luaにとって準標準とも言えるlfsライブラリも追加されています。<br>
        </p>
</div>